<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Résolution de Labyrinthe</title>
	<link rel="icon" href="https://wartets.github.io/N-Body-Problem/image/browser-icon.png">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="apple-touch-icon" href="https://wartets.github.io/Wartets/img/app-icon.jpg">
	<!-- <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>-->
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="style.css">
</head>
<body class="antialiased">
	<div class="container mx-auto p-4 md:p-8">

	<header class="text-center mb-8">
		<h1 class="text-3xl md:text-4xl font-bold accent-color mb-2">Exploration et Résolution de Labyrinthes</h1>
		<p class="text-xl text-gray-700">Approche évolutionnaire par algorithme génétique</p>
	</header>

	<main>
		<div class="grid grid-cols-1 gap-8 lg:grid-cols-3">
		
			<div id="generationPanel" class="order-1 lg:order-1 lg:col-start-auto">
				<div class="control-panel-bg p-6 rounded-lg shadow-md border border-color">
					<h2 class="text-xl font-bold mb-4 text-gray-800">Génération du Labyrinthe</h2>
					<div class="space-y-6 md:max-h-[calc(100vh-200px)] md:overflow-y-auto overflow-y-visible">
						<div>
							<label for="mazeAlgorithm" class="block text-sm font-medium text-gray-700">Algorithme de Génération:</label>
							<select id="mazeAlgorithm" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-accent-color focus:border-accent-color">
								<option value="dfs">DFS (Parcours en Profondeur)</option>
								<option value="prim">Prim's Algorithm</option>
								<option value="kruskal">Kruskal's Algorithm</option>
								<option value="recursiveBacktracker">Recursive Backtracker</option>
								<option value="sidewinder">Sidewinder Algorithm</option>
								<option value="eller">Eller's Algorithm</option>
								<option value="wilson">Wilson's Algorithm</option>
								<option value="growingTree">Growing Tree Algorithm</option>
								<option value="binaryTree">Binary Tree Algorithm</option>
								<option value="huntAndKill">Hunt-and-Kill Algorithm</option>
								<option value="manual">Dessin manuel</option>
							</select>
							<p class="text-xs text-gray-500 mt-1">Choisissez l'algorithme pour générer le labyrinthe.</p>
						</div>

						<div class="border-t border-color pt-4 mt-4">
							<label for="opennessRate" class="block text-sm font-medium text-gray-700">Ouverture du Labyrinthe: <span id="opennessRateValue" class="font-bold accent-color">0%</span></label>
							<input id="opennessRate" type="range" min="0" max="100" step="5" value="0" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
							<p class="text-xs text-gray-500 mt-1">Plus la valeur est élevée, plus le labyrinthe aura de boucles et de chemins.</p>
						</div>

						<div class="border-t border-color pt-4 mt-4">
							<label for="mazeSize" class="block text-sm font-medium text-gray-700">Taille du Labyrinthe: <span id="mazeSizeValue" class="font-bold accent-color">21x21</span></label>
							<input id="mazeSize" type="range" min="5" max="101" step="2" value="21" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
							<p id="mazeSizeInfo" class="text-xs text-gray-500 mt-1">Définit la largeur et la hauteur de la grille du labyrinthe.</p>
						</div>

						<div class="border-t border-color pt-4 mt-4">
							<label for="seedInput" class="block text-sm font-medium text-gray-700">Graine de Génération (Seed):</label>
							<div class="flex items-center space-x-2">
								<input type="text" id="seedInput" value="" placeholder="Laissez vide pour aléatoire" class="flex-1 p-2 border border-gray-300 rounded-lg focus:ring-accent-color focus:border-accent-color">
								<button id="randomSeedBtn" class="btn-secondary px-3 py-2 text-sm rounded-lg transition-colors duration-200">Graine Aléatoire</button>
							</div>
							<p class="text-xs text-gray-500 mt-1">Utilisez une graine spécifique pour générer le même labyrinthe de manière reproductible.</p>
						</div>
						
						<div id="drawingTools" class="hidden border-t border-color pt-4 mt-4">
							<label class="block text-sm font-medium text-gray-700">Outils de Dessin:</label>
							<p class="text-xs text-gray-500 mt-1">Cliquez sur le canevas pour dessiner ou effacer des murs et utilisez la molette de souris pour changer directions et valeurs.</p>
							<div class="flex space-x-2 mt-2">
								<button id="setStartBtn" class="btn-secondary w-full py-2 px-4 rounded-lg transition-colors duration-200 mt-2" data-mode="start">
									Définir le départ
								</button>
								<button id="setEndBtn" class="btn-secondary w-full py-2 px-4 rounded-lg transition-colors duration-200 mt-2" data-mode="end">
									Définir l'arrivée
								</button>
							</div>
							<div class="flex space-x-4 mt-2">
								<button id="drawWallBtn" class="btn-secondary w-full py-2 px-4 rounded-lg transition-colors duration-200" data-mode="wall">
									Mur
								</button>
								<button id="drawOneWayBtn" class="btn-secondary w-full py-2 px-4 rounded-lg transition-colors duration-200" data-mode="one_way">
									Sens unique
								</button>
								<button id="drawLimitedBtn" class="btn-secondary w-full py-2 px-4 rounded-lg transition-colors duration-200" data-mode="limited">
									Passage limité
								</button>
								<button id="eraseWallBtn" class="btn-secondary w-full py-2 px-4 rounded-lg transition-colors duration-200" data-mode="path">
									Chemin
								</button>
							</div>
							<button id="clearMazeBtn" class="btn-secondary w-full py-2 px-4 rounded-lg transition-colors duration-200 mt-2">
								Tout effacer
							</button>
							<div class="flex space-x-2 mt-2">
								<button id="doubleResBtn" class="btn-secondary w-full py-2 px-4 rounded-lg transition-colors duration-200">
									Doubler la résolution
								</button>
								<button id="halveResBtn" class="btn-secondary w-full py-2 px-4 rounded-lg transition-colors duration-200">
									Réduire la résolution
								</button>
							</div>
						</div>

						<button id="generateBtn" class="w-full btn-secondary font-bold py-2 px-4 rounded-lg transition-colors duration-200">Générer un Labyrinthe</button>
					</div>
				</div>
				
				<div id="status-container" class="bg-white rounded-lg shadow-md border border-color mt-4 p-4">
					<div id="status-message" class="text-left text-gray-700 max-h-32 overflow-y-auto">En attente de l'utilisateur...</div>
				</div>
			</div>
			
			<div id="mazeContainer" class="order-3 lg:order-2 lg:col-start-auto">
				<div id="progressInfo" class="bg-white p-4 rounded-lg shadow-md border border-color mb-4 hidden">
					<div class="grid grid-cols-3 gap-4 text-center text-sm text-gray-600">
						<div class="flex flex-col items-center">
							<span class="font-medium text-xs mb-1">Temps écoulé</span>
							<span id="elapsedTime" class="font-semibold accent-color text-lg">0s</span>
						</div>
						<div class="flex flex-col items-center">
							<span class="font-medium text-xs mb-1">Temps restant</span>
							<span id="remainingTime" class="font-semibold accent-color text-lg">?</span>
						</div>
						<div class="flex flex-col items-center">
							<span class="font-medium text-xs mb-1">Vitesse</span>
							<span id="stepsPerSecond" class="font-semibold accent-color text-lg">0/s</span>
						</div>
					</div>
				</div>
				
				<div class="bg-white p-4 rounded-lg shadow-md border border-color sticky top-8">
					<canvas id="mazeCanvas" class="w-full h-auto aspect-square rounded"></canvas>
				</div>
			</div>

			<div id="solutionPanel" class="order-4 lg:order-3 lg:col-start-auto">
				<div class="control-panel-bg p-6 rounded-lg shadow-md border border-color">
					<h2 class="text-xl font-bold mb-4 text-gray-800">Recherche de Solution (Algorithme Génétique)</h2>
					<div class="space-y-6 md:max-h-[calc(100vh-200px)] md:overflow-y-auto overflow-y-visible">
						<div>
							<label for="populationSize" class="block text-sm font-medium text-gray-700">Taille Population: <span id="populationSizeValue" class="font-bold accent-color">100</span></label>
							<input id="populationSize" type="range" min="5" max="1000" step="5" value="100" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
							<p class="text-xs text-gray-500 mt-1">Nombre d'individus (chemins) dans chaque génération de l'algorithme génétique.</p>
						</div>

						<div>
							<label for="generations" class="block text-sm font-medium text-gray-700">Générations: <span id="generationsValue" class="font-bold accent-color">50</span></label>
							<input id="generations" type="range" min="1" max="1000" step="1" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
							<p class="text-xs text-gray-500 mt-1">Nombre d'itérations d'évolution pour trouver une solution.</p>
						</div>

						<div>
							<label for="mutationRate" class="block text-sm font-medium text-gray-700">Taux de Mutation: <span id="mutationRateValue" class="font-bold accent-color">5%</span></label>
							<input id="mutationRate" type="range" min="1" max="100" step="0.1" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
							<p class="text-xs text-gray-500 mt-1">Probabilité qu'un mouvement aléatoire soit introduit dans un chromosome.</p>
						</div>

						<div>
							<label for="tournamentSize" class="block text-sm font-medium text-gray-700">Taille du Tournoi: <span id="tournamentSizeValue" class="font-bold accent-color">5</span></label>
							<input id="tournamentSize" type="range" min="2" max="100" step="1" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
							<p class="text-xs text-gray-500 mt-1">Nombre d'individus en compétition pour la sélection.</p>
						</div>

						<div>
							<label for="elitismRate" class="block text-sm font-medium text-gray-700">Taux d'Élitisme: <span id="elitismRateValue" class="font-bold accent-color">10%</span></label>
							<input id="elitismRate" type="range" min="0" max="50" step="0.1" value="10" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
							<p class="text-xs text-gray-500 mt-1">Pourcentage des meilleurs individus conservés directement.</p>
						</div>

						<div class="border-t border-color pt-4 mt-4">
							<label for="pathLengthMultiplier" class="block text-sm font-medium text-gray-700">Longueur Max. du Chemin (Multiplicateur): <span id="pathLengthMultiplierValue" class="font-bold accent-color">4x</span></label>
							<input id="pathLengthMultiplier" type="range" min="1" max="30" step="1" value="4" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
							<p class="text-xs text-gray-500 mt-1">Multiplie la taille du labyrinthe pour définir la longueur maximale du chemin.</p>
						</div>

						<div class="flex space-x-4">
							<button id="solveBtn" class="w-full btn-primary font-bold py-3 px-4 rounded-lg transition-colors duration-200 text-lg">Résoudre</button>
							<button id="continueBtn" class="w-full btn-primary font-bold py-3 px-4 rounded-lg transition-colors duration-200 text-lg" style="display: none;">Continuer</button>
							<button id="stopBtn" class="w-full btn-primary font-bold py-3 px-4 rounded-lg transition-colors duration-200 text-lg hidden">Stopper l'exécution</button>
						</div>

						<div class="border-t border-color pt-4 mt-4">
							<h3 class="text-lg font-semibold mb-3 text-gray-800">Paramètres Avancés</h3>

							<div class="control-group mt-4">
								<div class="custom-checkbox-container">
									<input type="checkbox" id="allowDiagonal" name="allowDiagonal" class="custom-checkbox-input">
									<label for="allowDiagonal" class="custom-checkbox-label">
										<span class="checkmark">
											<svg viewBox="0 0 12 10" fill="none" xmlns="http://www.w3.org/2000/svg">
												<path d="M1 5L4 8L11 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											</svg>
										</span>
										<span class="ml-2 text-sm font-medium text-gray-700">Autoriser les déplacements en diagonale</span>
									</label>
								</div>
								<p class="text-xs text-gray-500 mt-1 ml-6">Permet aux individus de se déplacer en diagonale uniquement si les 4 cases concernées sont libres (pas de mur). Réduit la distance parcourue.</p>
							</div>

							<div class="mt-4">
								<label for="animSpeed" class="block text-sm font-medium text-gray-700">Vitesse d'animation: <span id="animSpeedValue" class="font-bold accent-color">0ms</span></label>
								<input id="animSpeed" type="range" min="0" max="2000" step="10" value="0" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
								<p class="text-xs text-gray-500 mt-1">Contrôle la vitesse de visualisation de la résolution (n'affecte pas la vitesse de calcul).</p>
							</div>
							
							<div class="mt-4">
								<label for="crossoverRate" class="block text-sm font-medium text-gray-700">Taux de Croisement: <span id="crossoverRateValue" class="font-bold accent-color">80%</span></label>
								<input id="crossoverRate" type="range" min="0" max="100" step="0.1" value="80" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
								<p class="text-xs text-gray-500 mt-1">Probabilité que deux individus se reproduisent pour créer une nouvelle génération.</p>
							</div>
							
							<div class="mt-4">
								<label for="crossoverType" class="block text-sm font-medium text-gray-700">Type de Croisement:</label>
								<select id="crossoverType" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-accent-color focus:border-accent-color">
									<option value="singlePoint">Point unique</option>
									<option value="twoPoint">Deux points</option>
									<option value="uniform">Uniforme</option>
								</select>
								<p class="text-xs text-gray-500 mt-1">Méthode utilisée pour combiner les gènes des parents lors de la reproduction.</p>
							</div>
							
							<div class="mt-4">
								<label for="mutationType" class="block text-sm font-medium text-gray-700">Type de Mutation:</label>
								<select id="mutationType" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-accent-color focus:border-accent-color">
									<option value="swap">Swap</option>
									<option value="inversion">Inversion</option>
									<option value="scramble">Scramble</option>
								</select>
								<p class="text-xs text-gray-500 mt-1">Stratégie de modification aléatoire appliquée aux individus.</p>
							</div>
							
							<div class="mt-4">
								<label for="diversityPressure" class="block text-sm font-medium text-gray-700">Pression de Diversité: <span id="diversityPressureValue" class="font-bold accent-color">5%</span></label>
								<input id="diversityPressure" type="range" min="0" max="100" step="0.1" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
								<p class="text-xs text-gray-500 mt-1">Force l'introduction d'individus aléatoires pour maintenir la diversité génétique.</p>
							</div>
							
							<div class="mt-4">
								<label for="selectionPressure" class="block text-sm font-medium text-gray-700">Pression de Sélection: <span id="selectionPressureValue" class="font-bold accent-color">1.5</span></label>
								<input id="selectionPressure" type="range" min="1" max="10" step="0.1" value="1.5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
								<p class="text-xs text-gray-500 mt-1">Contrôle la compétitivité de la sélection des individus (valeurs plus élevées favorisent les meilleurs).</p>
							</div>
							
							<div class="border-t border-color pt-4 mt-4">
								<h4 class="text-md font-medium mb-3 text-gray-800">Paramètres de Fitness (négatif : pénalité | positif : récompense)</h4>
								
								<div>
									<label for="distanceWeight" class="block text-sm font-medium text-gray-700">Poids Distance: <span id="distanceWeightValue" class="font-bold accent-color">5</span></label>
									<input id="distanceWeight" type="range" min="-20" max="20" step="0.1" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
									<p class="text-xs text-gray-500 mt-1">Importance accordée à la réduction de la distance jusqu'à la sortie.</p>
								</div>
								
								<div class="mt-3">
									<label for="pathLengthWeight" class="block text-sm font-medium text-gray-700">Poids Longueur: <span id="pathLengthWeightValue" class="font-bold accent-color">-2</span></label>
									<input id="pathLengthWeight" type="range" min="-20" max="20" step="0.1" value="-3.5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
									<p class="text-xs text-gray-500 mt-1">Importance accordée aux chemins plus longs.</p>
								</div>
								
								<div class="mt-3">
									<label for="turnsWeight" class="block text-sm font-medium text-gray-700">Poids Virages: <span id="turnsWeightValue" class="font-bold accent-color">-1</span></label>
									<input id="turnsWeight" type="range" min="-20" max="20" step="0.1" value="-1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
									<p class="text-xs text-gray-500 mt-1">Importance accordée pour les changements de direction fréquents.</p>
								</div>
								
								<div class="mt-3">
									<label for="progressWeight" class="block text-sm font-medium text-gray-700">Poids Progrès: <span id="progressWeightValue" class="font-bold accent-color">3</span></label>
									<input id="progressWeight" type="range" min="-20" max="20" step="0.1" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
									<p class="text-xs text-gray-500 mt-1">Importance accordée pour l'exploration de nouvelles zones du labyrinthe.</p>
								</div>
								
								<div class="mt-3">
									<label for="collisionPenalty" class="block text-sm font-medium text-gray-700">Poids Collision: <span id="collisionPenaltyValue" class="font-bold accent-color">-10</span></label>
									<input id="collisionPenalty" type="range" min="-20" max="20" step="1" value="-10" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
									<p class="text-xs text-gray-500 mt-1">Importance accordée lorsqu'un chemin rencontre un mur.</p>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	
		<footer>
			<p class="font-medium text-xs">&copy; 2025. Tous droits réservés. Conçu par 
				<a href="https://wartets.github.io/Wartets/" target="_blank">&#x2197;Wartets</a>.
				<wbr>Voir plus de projets sur <a href="https://github.com/wartets" target="_blank">&#x2197;GitHub</a>.
			</p>
		</footer>
		<script src="main.js"></script> 
</body>
</html>
